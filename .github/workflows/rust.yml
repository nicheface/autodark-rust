name: Rust

on:
  push:
    branches: [ "dev" ]
  pull_request:
    branches: [ "dev" ]

env:
  CARGO_TERM_COLOR: always

jobs:
  build:

    runs-on: ubuntu-latest

    steps:
        - name: Checkout code
          uses: actions/checkout@v2

        - name: Set up Rust
          uses: actions-rs/toolchain@v1
          with:
            toolchain: stable
            override: true
        - name: rust-cargo
          uses: actions-rs/cargo@v1.0.1
          with:
            # Cargo command to run (ex. `check` or `build`)
            command: cargo build --release
        - name: Upload to Release
          uses: actions/upload-release-asset@v1
          with:
            upload_url: ${{ github.event.release.upload_url }}
            asset_path: target\release\autodark_egui_rr_test.exe  # 替换成你的应用程序路径
            asset_name: autodark_egui_rr_test.exe   # 替换成你的应用程序名称
            asset_content_type: application/octet-stream
          env:
            GITHUB_TOKEN:  ${{ secrets.TEST }}


          

  

          
